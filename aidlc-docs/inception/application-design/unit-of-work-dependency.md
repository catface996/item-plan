# 工作单元依赖关系 - 商品审核模块

## 概述

本项目包含两个工作单元，通过 RESTful API 进行通信。

---

## 工作单元依赖矩阵

| 工作单元 | 依赖单元 | 依赖类型 | 说明 |
|----------|----------|----------|------|
| product-review-backend | - | - | 独立单元，无外部依赖 |
| product-review-frontend | product-review-backend | HTTP API | 通过REST API调用后端 |

---

## 工作单元依赖图

```
┌─────────────────────────────────────────────────────────────┐
│                      商品审核系统                            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────────────┐                                │
│  │  product-review-frontend │                               │
│  │      (React + TS)        │                               │
│  │                          │                               │
│  │  ┌─────┐ ┌─────┐ ┌─────┐│                               │
│  │  │商品 │ │审核 │ │用户 ││                               │
│  │  │页面 │ │页面 │ │页面 ││                               │
│  │  └─────┘ └─────┘ └─────┘│                               │
│  └────────────┬─────────────┘                               │
│               │                                             │
│               │ HTTP/REST API                               │
│               │ (JSON)                                      │
│               ▼                                             │
│  ┌─────────────────────────┐                                │
│  │ product-review-backend  │                                │
│  │   (Spring Boot + MySQL) │                                │
│  │                          │                               │
│  │  ┌─────┐ ┌─────┐ ┌─────┐│                               │
│  │  │商品 │ │审核 │ │用户 ││                               │
│  │  │模块 │ │模块 │ │模块 ││                               │
│  │  └─────┘ └─────┘ └─────┘│                               │
│  └────────────┬─────────────┘                               │
│               │                                             │
│               ▼                                             │
│        ┌─────────────┐                                      │
│        │    MySQL    │                                      │
│        └─────────────┘                                      │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 后端内部模块依赖

### 模块依赖矩阵

| 模块 | 依赖模块 | 依赖类型 |
|------|----------|----------|
| common | - | 基础模块 |
| user | common | 直接依赖 |
| product | common, user | 直接依赖 |
| audit | common, user, product | 直接依赖 |

### 模块依赖图

```
┌─────────────────────────────────────────┐
│         product-review-backend          │
├─────────────────────────────────────────┤
│                                         │
│    ┌─────────┐                          │
│    │  audit  │                          │
│    └────┬────┘                          │
│         │                               │
│    ┌────┴────┐                          │
│    ▼         ▼                          │
│ ┌─────────┐ ┌─────────┐                 │
│ │ product │ │  user   │                 │
│ └────┬────┘ └────┬────┘                 │
│      │           │                      │
│      └─────┬─────┘                      │
│            ▼                            │
│      ┌─────────┐                        │
│      │ common  │                        │
│      └─────────┘                        │
│                                         │
└─────────────────────────────────────────┘
```

---

## 前端内部模块依赖

### 模块依赖矩阵

| 模块 | 依赖模块 | 依赖类型 |
|------|----------|----------|
| utils | - | 基础模块 |
| api | utils | 直接依赖 |
| store | api | 直接依赖 |
| components | - | 基础模块 |
| pages | api, store, components | 直接依赖 |

### 模块依赖图

```
┌─────────────────────────────────────────┐
│        product-review-frontend          │
├─────────────────────────────────────────┤
│                                         │
│         ┌─────────┐                     │
│         │  pages  │                     │
│         └────┬────┘                     │
│              │                          │
│    ┌─────────┼─────────┐                │
│    ▼         ▼         ▼                │
│ ┌─────┐ ┌─────────┐ ┌──────────┐        │
│ │ api │ │  store  │ │components│        │
│ └──┬──┘ └────┬────┘ └──────────┘        │
│    │         │                          │
│    └────┬────┘                          │
│         ▼                               │
│    ┌─────────┐                          │
│    │  utils  │                          │
│    └─────────┘                          │
│                                         │
└─────────────────────────────────────────┘
```

---

## API 接口契约

### 接口列表

| 接口 | 方法 | 路径 | 提供者 | 消费者 |
|------|------|------|--------|--------|
| 用户登录 | POST | /api/auth/login | backend | frontend |
| 用户登出 | POST | /api/auth/logout | backend | frontend |
| 获取当前用户 | GET | /api/auth/me | backend | frontend |
| 创建商品 | POST | /api/products | backend | frontend |
| 获取商品详情 | GET | /api/products/{id} | backend | frontend |
| 获取我的商品 | GET | /api/products/my | backend | frontend |
| 更新商品 | PUT | /api/products/{id} | backend | frontend |
| 获取待审核列表 | GET | /api/audits/pending | backend | frontend |
| 获取待复审列表 | GET | /api/audits/review | backend | frontend |
| 提交审核 | POST | /api/audits/{productId} | backend | frontend |
| 获取审核历史 | GET | /api/audits/history/{productId} | backend | frontend |
| 获取审核统计 | GET | /api/audits/stats | backend | frontend |

---

## 构建和部署顺序

| 顺序 | 工作单元 | 构建命令 | 部署方式 |
|------|----------|----------|----------|
| 1 | product-review-backend | `mvn clean package` | JAR包部署 |
| 2 | product-review-frontend | `npm run build` | 静态资源部署 |
